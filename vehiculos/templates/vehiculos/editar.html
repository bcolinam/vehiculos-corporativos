{% extends "base.html" %}

{% block title %}SGV | Editar Vehículo{% endblock %}

{% block extra_css %}
<style>
    .form-container {
        max-width: 650px;
        margin: 2rem auto;
    }
    .card {
        border: none;
        border-radius: 12px;
        box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    }
    .card-header {
        background-color: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
        padding: 1.5rem;
    }
    .form-label {
        font-weight: 600;
        color: #475569;
    }
    /* Estilizar los campos que vienen de Django form.as_p */
    form p input, form p select, form p textarea {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border: 1px solid #cbd5e1;
        border-radius: 6px;
        margin-top: 0.25rem;
    }
    form p input:focus {
        outline: none;
        border-color: #4f46e5;
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }
</style>
{% endblock %}

{% block content %}
<div class="container form-container">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'vehiculos:dashboard' %}">Inicio</a></li>
            <li class="breadcrumb-item"><a href="{% url 'vehiculos:detalle_vehiculos' %}">Vehículos</a></li>
            <li class="breadcrumb-item active">Editar</li>
        </ol>
    </nav>

    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h3 class="mb-0 fw-bold text-dark">Editar Vehículo</h3>
            <span class="badge bg-primary fs-6">{{ vehiculo.patente }}</span>
        </div>
        
        <div class="card-body p-4">
            <div class="alert alert-info mb-4 d-flex align-items-center">
                <i data-lucide="info" class="me-2" style="width: 20px"></i>
                Estás modificando los datos técnicos o el responsable asignado.
            </div>

            <form method="post" novalidate>
                {% csrf_token %}
                
                {% for field in form %}
                    <div class="mb-3">
                        <label class="form-label">{{ field.label }}</label>
                        {{ field }}
                        {% if field.errors %}
                            <div class="text-danger small mt-1">
                                {{ field.errors|striptags }}
                            </div>
                        {% endif %}
                        {% if field.help_text %}
                            <div class="form-text text-muted small">{{ field.help_text }}</div>
                        {% endif %}
                    </div>
                {% endfor %}

                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn btn-primary p-2">
                        <i data-lucide="save" class="me-1" style="width: 18px"></i> Guardar Cambios
                    </button>
                    <a href="{% url 'vehiculos:detalle_vehiculos' %}" class="btn btn-light text-muted">
                        Cancelar y volver
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    lucide.createIcons();
    
    // Opcional: Agregar clases de Bootstrap a los inputs generados por Django
    document.querySelectorAll('input, select, textarea').forEach(el => {
        el.classList.add('form-control');
    });
</script>
{% endblock %}